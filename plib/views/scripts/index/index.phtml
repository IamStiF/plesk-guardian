<?php
/**
 * Plesk Log Viewer
 *
 * @package Plesk_LogViewer
 * @author Plesk International GmbH
 * @license https://www.gnu.org/licenses/agpl-3.0.en.html AGPL-3.0
 * @link https://www.plesk.com/
 */
?>
<div class="pg-dashboard">
  <h2>Consola Centralizada de Logs</h2>
  <p>Mostrando los Ãºltimos eventos de todos los dominios, subdominios y herramientas (Plesk y WP Toolkit).</p>

  <?php if (!empty($this->entries)): ?>
    <table class="table" style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th>Dominio / Fuente</th>
          <th>Fecha/Hora</th>
          <th>Nivel</th>
          <th>Archivo</th>
          <th>Mensaje</th>
        </tr>
      </thead>
      <tbody>
        <?php foreach ($this->entries as $e): ?>
          <tr>
            <td><strong><?= htmlspecialchars($e['domain']) ?></strong></td>
            <td><?= htmlspecialchars($e['datetime']) ?></td>
            <td>
              <span style="color:
                <?= $e['severity']=='ERROR'?'#ff4d4d':
                   ($e['severity']=='WARN'?'#ffb400':'#06b6d4') ?>;
                font-weight:bold;">
                <?= htmlspecialchars($e['severity']) ?>
              </span>
            </td>
            <td><?= htmlspecialchars($e['event']) ?></td>
            <td style="white-space:pre-wrap;"><?= htmlspecialchars($e['message']) ?></td>
          </tr>
        <?php endforeach; ?>
      </tbody>
    </table>
  <?php else: ?>
    <p>No se encontraron logs en los dominios disponibles.</p>
  <?php endif; ?>
</div>
